---
title: "Coches"
author: "Imanol"
date: "6/3/2021"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(reticulate)
use_python("C:/Users/Imano/anaconda3/envs/Curso Estadistica/python.exe")
```

# Análisis de los coches (mtcars)

## Carga de datos
```{python}
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
from plotnine import ggplot
from plotnine.data import mtcars

data = mtcars
# Asignar a cada fila la columna name
data.index = mtcars["name"]

print(data.head())
```

## Medidas de centralización
```{python}
# Media de cada una de las columnas
print(data.mean()) 

# Media de cada una de las filas (no tiene mucho sentido hacerlo)
print(data.mean(axis = 1)) # axis = 1 media por filas

# Mediana de cada una de las columnas
print(data.median()) 

# Moda de cada una de las columnas
print(data.mode()) 
```

## Medidas vs distribuciones
```{python}
# Con distribución normal
norm_data = pd.DataFrame(np.random.normal(size=100000))
norm_data.plot(kind="density", figsize=(10,10))

## Media y mediana estan muy cerca de cero
plt.vlines(norm_data.mean(), ymin = 0, ymax = 0.4, linewidth=5.0, color = "green")
plt.vlines(norm_data.median(), ymin = 0, ymax = 0.4, linewidth=2.0, color = "red")

plt.show()

# Con distribución exponencial que tiene sesgo
skewed_data = pd.DataFrame(np.random.exponential(size=100000))
skewed_data.plot(kind="density", figsize=(10,10), xlim = (-1,5))

# Media y mediana estan mas alejadas
plt.vlines(skewed_data.mean(), ymin = 0, ymax = 1.0, linewidth=5.0, color = "green")
plt.vlines(skewed_data.median(), ymin = 0, ymax = 1.0, linewidth=2.0, color = "red")

plt.show()

# Con otra distribución normal
norm_data = np.random.normal(size=50)
outliers = np.random.normal(15, size=3)
combined_data = pd.DataFrame(np.concatenate((norm_data, outliers), axis = 0))

combined_data.plot(kind="density", figsize=(10,10), xlim = (-5,20))

# La media queda desplazada a la derecha, es muy sensible a los outliers
plt.vlines(combined_data.mean(), ymin = 0, ymax = 0.3, linewidth=5.0, color = "green")
plt.vlines(combined_data.median(), ymin = 0, ymax = 0.3, linewidth=2.0, color = "red")

plt.show()
```

